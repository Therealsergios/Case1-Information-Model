## Сценарий пользовательского тестирования

- Название: Создание объекта pipe с автозаполнением данных через REST API
- Цель: Оценить удобство интерфейса, корректность ручного ввода и успешное автоматическое обогащение объекта через REST API с использованием JWT
- Платформа: Веб-интерфейс PDM системы
- Устройство: ПК
- Участник: Пользователь-инженер
- Подключение к сети: Требуется для связи с внешней системой

### Предпосылки

- Пользователь авторизован в системе
- JWT-токены настроены и действительны
- API-интеграция между PDM и ERP системами работает корректно
- UUID генерируется PDM системой автоматически после отправки формы

### Задачи пользователя

Шаг 1: Создание нового объекта

 1. Перейти в раздел “Создать объект pipe”
 2. Ввести данные вручную:
 - dep_num: 14
 - area_name: MCK
 - class: Pipeline
 - name: 073
 - tag: ptp041
 - dn: 100
 - do: 110
 - length: 600.0

Шаг 2: Отправка формы

 3. Нажать кнопку «Сохранить»
 4. Система отправляет запрос на backend с введёнными данными

Шаг 3: Проверка системных полей

 5. Убедиться, что:
 - объект успешно сохранён (появилось сообщение или запись в таблице)
 - дата создания (create_date) и UUID сгенерированы автоматически и отображаются

Шаг 4: Принудительно обогащение

 6. В интерфейсе интеграционного сервиса запустите принудительну синхронизацию данных и ERP системы, подождите пока сервис закончит работу, проверьте наличие данных в созданном объекте
 - experiment_type, ex_pressure, exp_pressure, work_pressure
 - inv_num, pipe_level, environment_name, rev_period, work_temp
 7. Убедиться, что эти поля отображаются в карточке объекта после сохранения

### Что наблюдается

- Проверка Да / Нет / Проблема
- Пользователь без ошибок ввёл все поля 
- UUID сгенерировался автоматически 
- REST API вызовы прошли успешно (200 OK)
- Данные из внешней системы подтянулись
- JWT-токены использовались корректно
- Поведение системы при ошибках (404, 500)
- Логика отображения ошибок понятна пользователю 

### Дополнительные тест-кейсы

Неверный UUID
- Пользователь вводит UUID, по которому в ERP системе нет данных
- Ожидаемый результат: поля не обогащаются, Инетграционный сервис показывает сообщение: 400 «Данные не найдены во внешней системе»

Ошибка API
- Искусственно отключить API ERP системы
- Проверить: появится ли уведомление об ошибке связи / 500, запишется ли ошибка в лог

Повторное сохранение объекта
- Изменить ручное поле, например tag, и пересохранить.
- Проверить: перезапросятся/кэшируются ли новые данные через API